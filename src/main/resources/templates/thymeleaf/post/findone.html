<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Three Section Layout</title>
    <link rel="stylesheet" href="../css/layout2.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link
      rel="stylesheet"
      href="https://unpkg.com/swiper/swiper-bundle.min.css"
    />
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>



    <link rel="stylesheet" href="/css/template-style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


  <style>
    /*기본가닥 맞추기위한 css 추가*/
      /* 홈페이지 관련 스타일 태그 추가 */
      .audio-player {
        text-align: center;
        align-content: center;
        align-items: center;
        margin: 30px;
        margin-left: 200px;
        width: 50px;
        height: 50px;
      
    .guestbook {
        width: 100%;
        border-collapse: collapse;
    }
    .guestbook th,
    .guestbook td {
        border: 1px solid #ddd;
        padding: 10px;
        text-align: center;
    }
    .guestbook th {
        background-color: #34495e;
        color: white;
    }
    /* 모달 스타일 */
    /* .modal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.5);
        padding-top: 60px;
    }
    .modal-content {
        background-color: #fefefe;
        margin: 5% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 60%;
        border-radius: 10px;
    }*/
    .close {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
    }
    .close:hover,
    .close:focus {
        color: black;
        text-decoration: none;
        cursor: pointer;
    }
    button {
        border-radius: 4px;
        transition: all 0.3s ease;
    }
    button:hover {
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .menu-icon svg:hover {
        transform: scale(1.1);
        /* 호버 시 확대 효과 */
        background-color: #1abc9c;
    }
    .menu-icon button:hover {
        transform: scale(1.1);
        /* 호버 시 확대 효과 */
        background-color: #1abc9c;
    }
    .menu-icon svg {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        /* 동그랗게 만듦 */
        cursor: pointer;
        transition: transform 0.3s, background-color 0.3s;
    }
    .menu-icon button {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        /* 동그랗게 만듦 */
        cursor: pointer;
        transition: transform 0.3s, background-color 0.3s;
    }
    /*현목님 스타일만 추가 지정*/
    .menu-icon
    a:link,
    .menu-icon
    a:visited {
    color:currentColor;
    }
    </style>



    <style>
      /* 기존 코드는 그대로 유지하고 다음 내용을 수정 또는 추가합니다 */

      /* 레이아웃 */

      /* 기존 코드는 그대로 유지하고 다음 내용을 수정 또는 추가합니다 */
      a {
        text-decoration: none;
      }
      .container {
        display: flex;
        width: 100%;
        max-width: 100%;
        margin: 0;
        padding: 0;
      }

      .sidebar {
        flex: 0 0 400px;
        background-color: #2c3e50;
        color: white;
        padding: 20px;
        height: 100vh;
        position: fixed;
        left: 0;
        top: 0;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        align-items: center;
        z-index: 1000;
      }

      /* ... (중간 코드 생략) ... */

      main {
        flex: 1;
        margin-left: 400px;
        padding: 20px;
        min-width: 0;
        background-color: #ecf0f1;
        overflow-x: hidden; /* 가로 스크롤 방지 */
      }

      /* 컨텐츠 박스 */
      .content-box,
      .comment-content-box {
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        padding: 20px;
        margin-bottom: 20px;
        overflow: hidden; /* 내용이 넘치지 않도록 */
      }

      /* Swiper 컨테이너 */
      .swiper-container {
        margin-bottom: 20px;
        max-width: 100%;
        overflow: hidden;
      }

      .swiper-slide {
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
      }

      .swiper-slide img {
        max-width: 100%;
        max-height: 100%;
        width: auto;
        height: auto;
        object-fit: contain;
      }

      .swiper-button-next,
      .swiper-button-prev {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 40px;
        height: 40px;
        background-color: rgba(0, 0, 0, 0.5);
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        z-index: 10;
      }

      .swiper-button-next {
        right: 10px;
      }

      .swiper-button-prev {
        left: 10px;
      }

      .swiper-button-next::after,
      .swiper-button-prev::after {
        font-size: 20px;
      }

      /* 기타 이미지에 대한 스타일 */
      img,
      video,
      iframe {
        max-width: 100%;
        height: auto;
        object-fit: contain;
      }

      /* ... (반응형 디자인 코드는 그대로 유지) ... */
    </style>
  </head>
  <body>
    <div class="container">
      <aside class="sidebar">
        <!-- 상단 메뉴 -->
        <div class="menu-top">
          <a href="/baseleap/postlist" class="menu-icon" title="게시글 보기">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                  class="bi bi-list-columns-reverse" viewBox="0 0 16 16">
                  <path fill-rule="evenodd"
                      d="M0 .5A.5.5 0 0 1 .5 0h2a.5.5 0 0 1 0 1h-2A.5.5 0 0 1 0 .5m4 0a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1h-10A.5.5 0 0 1 4 .5m-4 2A.5.5 0 0 1 .5 2h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5m4 0a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m-4 2A.5.5 0 0 1 .5 4h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5m4 0a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5m-4 2A.5.5 0 0 1 .5 6h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5m4 0a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 0 1h-8a.5.5 0 0 1-.5-.5m-4 2A.5.5 0 0 1 .5 8h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5m4 0a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 0 1h-8a.5.5 0 0 1-.5-.5m-4 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5m4 0a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1h-10a.5.5 0 0 1-.5-.5m-4 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5m4 0a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5m-4 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5m4 0a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5" />
              </svg></a>
              <a th:href="@{/baseleap/home/page(pageUserId=${session.homePageId})}" class="menu-icon" title="방명록 보기">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-journal-text" viewBox="0 0 16 16">
                  <path
                      d="M5 10.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5m0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5" />
                  <path
                      d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2" />
                  <path
                      d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1z" />
              </svg></a>
          <a href="/baseleap/my-page/search" class="menu-icon" title="유저 검색"><svg
                  xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                  class="bi bi-search" viewBox="0 0 16 16">
                  <path
                      d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0" />
              </svg></a>
      </div>
          <!-- 유저 프로필 영역 -->
          <div class="user-profile">
              <a th:href="@{/baseleap/home/page(pageUserId=${session.homePageId})}">
                <img th:src="@{${profileImgPath}}" alt="Profile Picture" class="profile-picture">
              </a>
              <div class="user-info">
                  <h2 th:text="${userNickName} + '\'s HomePage'">${nickname}'s HomePage</h2>
                  <hr>
                  <p th:text="${userIntroduce}">${userIntroduce}</p>
              </div>
          </div>
            <!-- 하단 메뉴 -->
            <div class="menu-bottom">
              <a href="#" class="menu-icon" title="게시글 쓰기"><svg xmlns="http://www.w3.org/2000/svg"
                      width="16" height="16" fill="currentColor" class="bi bi-pencil-square"
                      viewBox="0 0 16 16">
                      <path
                          d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z" />
                      <path fill-rule="evenodd"
                          d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z" />
                  </svg></a>
                            <!-- 현재 로그인한 유저가 페이지 소유자인 경우 홈피 꾸미기 버튼이 보이도록 설정 -->
              <span th:if="${session.loginUserId == session.homePageId}">
                <a class="menu-icon" id="openSettings">
                    <!-- SVG 코드 그대로 유지 -->
                    <svg xmlns="http://www.w3.org/2000/svg"
                    width="16" height="16" fill="currentColor" class="bi bi-pen"
                    viewBox="0 0 16 16">
                    <path
                        d="m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001m-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708z" />
                </svg>
                </a>
                <a th:href="@{/baseleap/my-page/info}" class="menu-icon" title="페이지 설정">
                    <!-- SVG 코드 그대로 유지 -->
                    <svg xmlns="http://www.w3.org/2000/svg"
                    width="16" height="16" fill="currentColor" class="bi bi-gear"
                    viewBox="0 0 16 16">
                    <path
                        d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492M5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0" />
                    <path
                        d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115z" />
                </svg></a>
                </a>
              </span>
            <!-- 로그인 유저가 페이지 소유자가 아닌 경우 '나의 한마디' 버튼이 보이도록 설정 -->
            <span th:if="${session.loginUserId != session.homePageId}">
                <a class="menu-icon" id="openGuestBookForm">
                    <!-- SVG 코드 그대로 유지 -->
                    <svg xmlns="http://www.w3.org/2000/svg"
                    width="16" height="16" fill="currentColor" class="bi bi-pen"
                    viewBox="0 0 16 16">
                    <path
                        d="m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001m-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708z" />
                </svg>
                </a>
                <a href="#" class="menu-icon" title="페이지 설정">
                    <!-- SVG 코드 그대로 유지 -->
                    <svg xmlns="http://www.w3.org/2000/svg"
                    width="16" height="16" fill="currentColor" class="bi bi-gear"
                    viewBox="0 0 16 16">
                    <path
                        d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492M5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0" />
                    <path
                        d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115z" />
                </svg></a>
                </a>
              </span>
  
  
                        </div>
      </aside>
  
  

      <!-- 메인 콘텐츠 -->
      <main class="content">
        <div class="post-summary">
          <input type="hidden" th:value="${findPost.post.id}" id="postId" />
          <input type="hidden" id="userNickName" th:value="${userNickName}" />
          <input type="hidden" id="userId" th:value="${userId}" />
          <div>
            <h2 th:text="${findPost.post.title}"></h2>

            <a
              href="javascript:void(0);"
              id="heart"
              class="heart"
              th:style="${findPost.post.userCheck != 0 ? 'display:none' : ''}"
              onclick="like(0)"
              >♡</a
            >
            <a
              href="javascript:void(0);"
              id="heart1"
              class="heart1"
              th:style="${findPost.post.userCheck == 0 ? 'display:none' : ''}"
              onclick="like(1)"
              >♥</a
            >

            <span
              readonly
              id="like-count"
              th:text="${findPost.post.likeCount}"
            ></span>

            <h5 th:text="${findPost.post.nickName}"></h5>
            <h6 th:text="${findPost.post.createdAt}"></h6>

            <div class="user-btn" th:if="${userId == homePageId}">
              <a th:href="@{/baseleap/postupdate(postId=${findPost.post.id})}"
                >수정</a
              >
              <a
                th:href="@{/baseleap/postdelete(postId=${findPost.post.id})}"
                class="delete-btn"
                >삭제</a
              >
            </div>
          </div>
          <div class="content-box">
            <p>내용</p>
            <p th:text="${findPost.post.content}" readonly></p>
          </div>
          <div class="swiper-container">
            <div class="swiper-wrapper">
              <div th:if="${findPost.post.image1 != null}" class="swiper-slide">
                <img
                  th:src="${findPost.post.image1}"
                  alt="이미지"
                  class="find-image"
                />
              </div>
              <div th:if="${findPost.post.image2 != null}" class="swiper-slide">
                <img
                  th:src="${findPost.post.image2}"
                  alt="이미지"
                  class="find-image"
                />
              </div>
              <div th:if="${findPost.post.image3 != null}" class="swiper-slide">
                <img
                  th:src="${findPost.post.image3}"
                  alt="이미지"
                  class="find-image"
                />
              </div>
            </div>
            <!-- Swiper navigation buttons -->
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
            <div class="swiper-pagination"></div>
          </div>
          <div class="comment-content-box">
            <ul class="cc" id="comment-ul">
              <block th:each="comment : ${findPost.postComments}">
                <li
                  class="comment"
                  th:if="${comment.parentid == null}"
                  th:id="'comment-li-' + ${comment.id}"
                >
                  <div class="comment-id" th:text="${comment.usernickname}">
                    User1
                  </div>
                  <div
                    class="comment-content"
                    th:id="'comment-content-text-' + ${comment.id}"
                    th:text="${comment.comment}"
                  >
                    댓글 내용 1
                  </div>

                  <div
                    th:id="'comment-edit-' + ${comment.id}"
                    style="display: none"
                  >
                    <input
                      type="text"
                      th:id="'comment-input-' + ${comment.id}"
                      th:value="${comment.comment}"
                    />
                    <button
                      th:id="'comment-save-btn-' + ${comment.id}"
                      th:onclick="'commentUpdate(' + ${comment.id} + ')'"
                    >
                      등록
                    </button>
                  </div>
                  <div>
                    <div class="comment-date" th:text="${comment.createdAt}">
                      2024-09-16
                    </div>
                    <div th:if="${userId == homePageId}">
                      <button
                        th:id="'comment-update-btn-' + ${comment.id}"
                        th:onclick="'openUpdate(' + ${comment.id} + ')'"
                      >
                        수정
                      </button>
                      <button
                        th:id="'comment-delete-btn-' + ${comment.id}"
                        th:onclick="'commentDelete(' + ${comment.id} + ')'"
                      >
                        삭제
                      </button>
                    </div>
                  </div>
                  <button
                    th:id="'reply-btn-' + ${comment.id}"
                    th:onclick="'replyOpen(' + ${comment.id} + ')'"
                  >
                    답글쓰기
                  </button>
                  <div th:id="'reply-input-' + ${comment.id}" hidden>
                    <input
                      class="reply-text"
                      type="text"
                      th:id="'reply-text-' + ${comment.id}"
                    />
                    <button
                      id="reply-add-btn"
                      th:onclick="'replyAdd(' + ${comment.id} + ')'"
                    >
                      답글등록
                    </button>
                  </div>

                  <div th:id="'comment-box-' + ${comment.id} + ''">
                    <ul
                      class="nested"
                      th:each="reply : ${findPost.postComments}"
                      th:if="${reply.parentid == comment.id}"
                    >
                      <li class="recomment" th:id="'reply-li-' + ${reply.id}">
                        <div
                          class="recomment-id"
                          th:text="${reply.usernickname}"
                        >
                          User2
                        </div>
                        <div
                          class="recomment-content"
                          th:text="${reply.comment}"
                          th:id="'reply-text-' + ${reply.id}"
                        >
                          대댓글 1-1 내용
                        </div>
                        <div
                          class="recomment-date"
                          th:text="${reply.createdAt}"
                        >
                          2024-09-16
                        </div>
                        <div
                          th:id="'reply-edit-' + ${reply.id}"
                          style="display: none"
                        >
                          <input
                            type="text"
                            th:id="'reply-input-' + ${reply.id}"
                            th:value="${reply.comment}"
                          />
                          <button
                            th:id="'comment-save-btn-' + ${reply.id}"
                            th:onclick="'replyUpdate(' + ${reply.id} + ')'"
                          >
                            등록
                          </button>
                        </div>
                        <div th:if="${userId == homePageId}">
                          <button
                            th:onclick="'replyUpdateOpen(' + ${reply.id} + ')'"
                          >
                            수정
                          </button>
                          <button
                            th:onclick="'replyDelete('+ ${reply.id} + ')'"
                          >
                            삭제
                          </button>
                        </div>
                      </li>
                    </ul>
                  </div>
                </li>
              </block>
            </ul>
            <input class="comment-text" type="text" id="comment-text" />
            <button id="comment-add-btn">댓글쓰기</button>
          </div>
        </div>
      </main>
    </div>
  </body>
  <script>
    var swiper = new Swiper(".swiper-container", {
      loop: true, // 무한 루프
      pagination: {
        el: ".swiper-pagination",
        clickable: true,
      },
      navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev",
      },
    });

    function openUpdate(commentId) {
      // 댓글 내용을 숨기고 인풋창을 표시
      document.getElementById("comment-edit-" + commentId).style.display =
        "block";
    }

    $("#comment-add-btn").click(() => {
      const commentText = $(".comment-text").val();
      // 날짜가져오기
      const now = new Date();
      const year = now.getFullYear();
      const month = String(now.getMonth() + 1).padStart(2, "0"); // 월은 0부터 시작하므로 +1
      const day = String(now.getDate()).padStart(2, "0");
      const hours = String(now.getHours()).padStart(2, "0");
      const minutes = String(now.getMinutes()).padStart(2, "0");
      const formattedDate = `${year}.${month}.${day}. ${hours}:${minutes}`;
      const data = {
        userId: $("#userId").val(),
        comment: commentText,
        postId: $("#postId").val(),
      };

      const userNickName = $("#userNickName").val();

      $.ajax({
        type: "post",
        url: "/baseleap/postcommentcreate",
        data: JSON.stringify(data),
        contentType: "application/json; charset=utf-8",
      }).done((resp) => {
        if (resp == "SUCCESS") {
          $("#comment-ul").append(`
                <li class="comment">
                  <div class="comment-id">${userNickName}</div>
                  <div class="comment-content">${data.comment}</div>
                  <div class="comment-date">${formattedDate}</div>
                </li>
          `);
          $("#comment-text").val("");
        }
      });
    });

    function replyOpen(commentId) {
      const replyDiv = document.getElementById("reply-input-" + commentId);
      replyDiv.hidden = false;
    }

    function replyUpdateOpen(replyId) {
      document.getElementById("reply-edit-" + replyId).style.display = "block";
    }

    function replyAdd(commentId) {
      // 현재 날짜
      const now = new Date();
      const year = now.getFullYear();
      const month = String(now.getMonth() + 1).padStart(2, "0"); // 월은 0부터 시작하므로 +1
      const day = String(now.getDate()).padStart(2, "0");
      const hours = String(now.getHours()).padStart(2, "0");
      const minutes = String(now.getMinutes()).padStart(2, "0");
      const formattedDate = `${year}.${month}.${day}. ${hours}:${minutes}`;
      // 대댓글 내용
      const replyInput = document.getElementById("reply-text-" + commentId);
      const replyText = replyInput.value;

      const userNickName = $("#userNickName").val();

      const data = {
        postId: $("#postId").val(),
        userId: $("#userId").val(),
        commentId: commentId,
        reply: replyText,
      };

      $.ajax({
        type: "post",
        url: "/baseleap/postreplycreate",
        data: JSON.stringify(data),
        contentType: "application/json; charset=utf-8",
      }).done((resp) => {
        if (resp == "SUCCESS") {
          $("#comment-box-" + data.commentId).append(`
                <ul class="nested">
                      <li class="recomment">
                        <div class="recomment-id">
                        ${userNickName}
                        </div>
                        <div class="recomment-content">
                          ${data.reply}
                        </div>
                        <div class="recomment-date">
                          ${formattedDate}
                        </div>
                      </li>
                    </ul>
          `);
          replyInput.value = "";
          const replyDiv = document.getElementById("reply-input-" + commentId);
          replyDiv.hidden = true;
        }
      });
    }

    function commentUpdate(commentId) {
      const updateComment = $("#comment-input-" + commentId).val();
      const comment = $("#comment-content-text-" + commentId);
      const data = {
        commentId: commentId,
        comment: updateComment,
      };
      $.ajax({
        type: "put",
        url: "/baseleap/postcomment",
        data: JSON.stringify(data),
        contentType: "application/json; charset=utf-8",
      }).done((resp) => {
        if (resp == "SUCCESS") {
          comment.text(updateComment);
          document.getElementById("comment-edit-" + commentId).style.display =
            "none";
        }
      });
    }

    function commentDelete(commentId) {
      $.ajax({
        type: "delete",
        url: "/baseleap/postcomment?commentId=" + commentId,
        contentType: "application/json; charset=utf-8",
      }).done((resp) => {
        if (resp == "SUCCESS") {
          $("#comment-li-" + commentId).remove();
        }
      });
    }

    function replyUpdate(replyId) {
      const reply = $("#reply-input-" + replyId);
      const data = {
        commentId: replyId,
        comment: reply.val(),
      };
      $.ajax({
        type: "put",
        url: "/baseleap/postreply",
        data: JSON.stringify(data),
        contentType: "application/json; charset=utf-8",
      }).done((resp) => {
        if (resp == "SUCCESS") {
          console.log("asdadasd" + data.comment);
          $("#reply-text-" + replyId).text(data.comment);
          document.getElementById("reply-edit-" + replyId).style.display =
            "none";
        }
      });
    }

    function replyDelete(replyId) {
      $.ajax({
        type: "delete",
        url: "/baseleap/postcomment?commentId=" + replyId,
        contentType: "application/json; charset=utf-8",
      }).done((resp) => {
        if (resp == "SUCCESS") {
          $("#reply-li-" + replyId).remove();
        }
      });
    }

    function like(check) {
      const data = {
        postId: $("#postId").val(),
        userId: $("#userId").val(),
        check: check,
      };
      const likeCount = $("#like-count");
      let nowCount = parseInt(likeCount.text(), 10);

      $.ajax({
        type: "post",
        url: "/baseleap/postlike",
        data: JSON.stringify(data),
        contentType: "application/json; charset=utf-8",
      }).done((resp) => {
        if (check == 0) {
          nowCount++;
          likeCount.text(nowCount);

          $("#heart").hide(); // 비활성 하트 숨기기
          $("#heart1").show(); // 활성 하트 보이기
          // $("#heart").attr("hidden", true)
          // $("#heart1").attr("hidden", false)
        } else {
          nowCount--;
          likeCount.text(nowCount);

          $("#heart1").hide(); // 활성 하트 숨기기
          $("#heart").show(); // 비활성 하트 보이기
          // $("#heart1").attr("hidden", true)
          // $("#heart").attr("hidden", false)
        }
      });
    }
  </script>
</html>
